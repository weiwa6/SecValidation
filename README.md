# Security Validation with Cisco SecureX

## About this idea

It's one thing buying security controls for your endpoint, email etc., but what are you doing to confirm that they are alerting and reacting as you expect? In addition, is it a manual process that typically requires someone within the security team to proactively perform this testing to then highlight what success looks like?

With Cisco SecureX you can automate this process and deliver relevant information back to your team and management on how your investment in security is ensuring that your organisation is defended as intended and informed of any compromise attempt. It's an example of how through simple automation via SecureX you can change the way you perform the everyday tasks of securing your environment.

There are currently 3 type of events that can be generated by the scripts under "Modules" folder.

*   DNS events against Cisco Umbrella
*   Endpoint events against Cisco Secure Endpoint (f.k.a. AMP4E)
*   IPS events against Cisco NGFW

## How it works

There are multiple components required to automate the process. Here are the high level steps for each use case:

1.  SecureX Remote generate attack activity from SXO Remote, e.g. malicious DNS lookup against Umbrella VA
2.  Check expected result, e.g. DNS sinkhole address
3.  (Optional) Check SIEM logs, e.g. Splunk API query
4.  Check SxTR Sighting
5.  Update test result for Dashboard tile
6.  (Optional) Send notification, e.g. Webex message

## Prerequisite

*   SXO Remote VM deployed with ssh root access. Check [SecureX document](https://ciscosecurity.github.io/sxo-05-security-workflows/remote/setup) for details.
*   The scripts make use of a DNS record hosted on Cloudflare, which is used to save the validation results via API for SecureX dashboard tiles. This is for PoC and demo purposes only and should be changed to your secure storage resources.
*   SIEM integration with Cisco products. The workflows use Splunk with relevant Cisco TA configured. Please validate the query string against your environment.Â   
    If this is not required, please skip and disable Splunk activities from SXO workflow.
*   Webex bot and credentials for sending message. Check [Webex and SecureX document](https://ciscosecurity.github.io/sxo-05-security-workflows/atomics/configuration/webex) for details.  
    If this is not required, please skip and disable Webex activities from SXO workflow.

# Installation

1.  Login to SXO Remote VM and install python  
    `sudo apt-get update`  
    `sudo apt install python3.8-venv`
2.  Download repo and install dependencies.
3.  Add to root crontab to automatically start the python script  
    `crontab -e`  
    `#Add this to the end of the crontab:`  
    `@reboot su -c '/home/ubuntu/runMyAPI.sh' -s /usr/bin/bash ubuntu 2>&1`
4.  Reboot SXO VM and confirm the scripts are running.
5.  Import all the json workflows into SecureX.
6.  Update Target and Account credentials for Splunk, CloudFlare and Webex.
7.  Update URL and DNS for your Cloudflare ID and DNS record.
8.  Update scheduler for the workflows.
9.  Install "Dashboard\_Relay" on another host and register to SecureX as a relay module
10.  Add tiles to SecureX dashboard from the relay module above.
